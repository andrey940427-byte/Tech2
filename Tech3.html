<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—á–∏—Ç–µ–ª—å—Å–∫–∏–π –ö–∞–ª–µ–Ω–¥–∞—Ä—å –†–ë 2025-2026</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS –¥–ª—è —Å—Ç–∏–ª–µ–π -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–∞ Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —à–∏—Ä–∏–Ω—É –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
            max-width: 100vw; 
            overflow-x: hidden; 
        }
        /* –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∞–∫–∂–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è */
        .main-container-wrapper {
            box-sizing: border-box;
            width: 100%;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
        }
        .day-cell {
            padding: 4px 2px;
            font-size: 0.75rem; /* text-xs */
            height: 48px;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 6px;
            cursor: pointer; 
            position: relative; 
            transition: background-color 0.15s, border-color 0.15s;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); 
        }
        .day-cell:hover {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
        .day-number {
            font-weight: 600;
        }

        /* --- –°—Ç–∏–ª–∏ –¥–ª—è –í—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –û–∫–Ω–∞ (Popover) --- */
        .popover-box {
            white-space: normal; 
            max-width: 250px; 
            text-align: left;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
            transform: translate(-50%, 0); 
            margin-bottom: 8px; 
            
            /* –ë–∞–∑–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è: –°–í–ï–†–•–£ */
            bottom: 100%;
            /* –§–∏–∫—Å –æ–±—Ä–µ–∑–∞–Ω–∏—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏: —Ü–µ–Ω—Ç—Ä—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ cell */
            left: 50%;
            z-index: 50;
        }
        
        /* –ü–æ–∑–∏—Ü–∏—è –¥–ª—è –ü–ï–†–í–û–ô –°–¢–†–û–ö–ò: –°–ù–ò–ó–£ */
        .popover-below .popover-box {
            bottom: auto;
            top: 100%;
            margin-bottom: 0;
            margin-top: 8px;
        }

        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–∫—Å –¥–ª—è –∫—Ä–∞–π–Ω–∏—Ö –ª–µ–≤—ã—Ö/–ø—Ä–∞–≤—ã—Ö —è—á–µ–µ–∫, —á—Ç–æ–±—ã –ø–æ–ø–æ–≤–µ—Ä –Ω–µ –≤—ã—Ö–æ–¥–∏–ª –∑–∞ –∫—Ä–∞–π —ç–∫—Ä–∞–Ω–∞ */
        .day-cell:nth-child(7n+1):hover .popover-box { /* –ü–µ—Ä–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü */
            transform: translateX(0); /* –°–¥–≤–∏–≥–∞–µ–º –≤–ª–µ–≤–æ, —á—Ç–æ–±—ã –∫—Ä–∞–π —Å–æ–≤–ø–∞–¥–∞–ª —Å —è—á–µ–π–∫–æ–π */
            left: 0;
        }

        .day-cell:nth-child(7n):hover .popover-box { /* –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ç–æ–ª–±–µ—Ü */
            transform: translateX(-100%); /* –°–¥–≤–∏–≥–∞–µ–º –≤–ø—Ä–∞–≤–æ, —á—Ç–æ–±—ã –∫—Ä–∞–π —Å–æ–≤–ø–∞–¥–∞–ª —Å —è—á–µ–π–∫–æ–π */
            left: 100%;
        }

        /* –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —è—á–µ–µ–∫ */
        .day-cell:not(:nth-child(7n+1)):not(:nth-child(7n)):hover .popover-box {
            transform: translate(-50%, 0);
            left: 50%;
        }


        .day-cell:hover .popover-box {
            opacity: 1;
            pointer-events: auto;
        }

        /* --- –¶–≤–µ—Ç–æ–≤–∞—è –ª–µ–≥–µ–Ω–¥–∞ –∏ —Å—Ç–∏–ª–∏ --- */
        .weekend { background-color: #fecaca; color: #dc2626; } 
        .official-holiday { background-color: #ff8a8a; color: #7f1d1d; font-weight: 700; border: 2px solid #ef4444; } 
        .transfer-day-off { background-color: #6ee7b7; color: #065f46; font-weight: 700; border: 1px solid #10b981; } 
        .transfer-workday { background-color: #bfdbfe; color: #1d4ed8; border: 1px dashed #3b82f6; font-weight: 700; } 
        .competition { background-color: #fef08a; color: #a16207; border: 1px solid #eab308; } 
        .school-holiday { background-color: #ffffff; color: #6d28d9; border: 1px solid #8b5cf6; } 
        .exam { background-color: #ccfbf1; color: #0f766e; border: 1px solid #14b8a6; font-weight: 700; } 
        .catholic-holiday { background-color: #fce7f3; color: #9d174d; border: 1px solid #db2777; } 
        .orthodox-holiday { background-color: #fffbeb; color: #b45309; border: 1px solid #f59e0b; } 
        .niko-testing { background-color: #f3e8ff; color: #7e22ce; border: 1px solid #c084fc; font-weight: 700; } 

        .today { background-color: #fee2e2 !important; border: 2px solid #ef4444 !important; color: #ef4444 !important; } 

        .current-month { background-color: #ffffff; }
        .other-month { background-color: #e5e7eb; color: #6b7280; }

        .holiday-overlay {
            color: #6d28d9 !important; 
            border: 1px solid #8b5cf6 !important; 
        }
    </style>
</head>
<body>

    <div class="max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 main-container-wrapper">
        <h1 class="text-3xl font-extrabold text-center text-gray-900 mb-2">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –£—á–∏—Ç–µ–ª—è</h1>
        <p class="text-center text-lg text-gray-600 mb-8">–£—á–µ–±–Ω—ã–π –≥–æ–¥ 2025 ‚Äì 2026 (–°–µ–Ω—Ç—è–±—Ä—å 2025 - –ê–≤–≥—É—Å—Ç 2026, –†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–µ–ª–∞—Ä—É—Å—å)</p>

        <!-- –õ–µ–≥–µ–Ω–¥–∞ -->
        <div class="flex flex-wrap justify-center gap-3 mb-8 text-xs font-semibold">
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-fecaca"></span> ‚Äî –í—ã—Ö–æ–¥–Ω–æ–π (–°–±/–í—Å)</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-ff8a8a border border-2 border-red-600"></span> ‚Äî **–ö—Ä–∞—Å–Ω—ã–π –¥–µ–Ω—å (–ü—Ä–∞–∑–¥–Ω–∏–∫)**</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-white border border-1 border-violet-500"></span> ‚Äî **–ö–∞–Ω–∏–∫—É–ª—ã (\*)**</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-ccfbf1 border border-1 border-teal-500"></span> ‚Äî **–¶–≠**</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-f3e8ff border border-1 border-purple-400"></span> ‚Äî **–ù–ò–ö–û**</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-6ee7b7 border border-1 border-emerald-600"></span> ‚Äî **–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–π –í—ã—Ö**</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-bfdbfe border border-1 border-blue-600"></span> ‚Äî **–†–∞–±–æ—á–∞—è –°–± (–ü–µ—Ä–µ–Ω–æ—Å)**</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-fef08a border border-1 border-yellow-600"></span> ‚Äî **–û–ª–∏–º–ø/–ù–ü–ö**</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-fce7f3 border border-1 border-pink-700"></span> ‚Äî **–ö–∞—Ç. –ü—Ä–∞–∑–¥–Ω–∏–∫**</span>
            <span class="flex items-center"><span class="w-4 h-4 rounded-full mr-1 bg-fffbeb border border-1 border-amber-500"></span> ‚Äî **–ü—Ä–∞–≤. –ü—Ä–∞–∑–¥–Ω–∏–∫**</span>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–µ—Å—è—Ü–µ–≤ -->
        <div id="calendarContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–ª–µ–Ω–¥–∞—Ä–∏ -->
        </div>
    </div>

    <script>
        // –î–∞—Ç–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–Ω—è
        const TODAY_DATE_KEY = new Date().toLocaleDateString('en-CA', { year: 'numeric', month: '2-digit', day: '2-digit' });
        
        // --- –§–£–ù–ö–¶–ò–ò –î–ê–ù–ù–´–• –ö–ê–õ–ï–ù–î–ê–†–Ø ---
        function generateDateRange(start, end, name, type) {
            const events = {};
            // –î–æ–±–∞–≤–ª—è–µ–º 'T00:00:00' –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏
            let current = new Date(start + 'T00:00:00'); 
            const endDate = new Date(end + 'T00:00:00');

            while (current <= endDate) {
                const year = current.getFullYear();
                const month = String(current.getMonth() + 1).padStart(2, '0');
                const day = String(current.getDate()).padStart(2, '0');
                const dateKey = `${year}-${month}-${day}`;
                events[dateKey] = { name, type };
                current.setDate(current.getDate() + 1);
            }
            return events;
        }

        // –ö–∞–Ω–∏–∫—É–ª—ã
        const SCHOOL_HOLIDAYS = {
            ...generateDateRange('2025-11-02', '2025-11-09', '–û—Å–µ–Ω–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã (3-11 –∫–ª.)', 'school-holiday'),
            ...generateDateRange('2025-12-25', '2026-01-07', '–ó–∏–º–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã (3-11 –∫–ª.)', 'school-holiday'),
            ...generateDateRange('2026-03-22', '2026-03-29', '–í–µ—Å–µ–Ω–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã (3-11 –∫–ª.)', 'school-holiday'),
        };

        // –≠–∫–∑–∞–º–µ–Ω—ã (–¶–≠)
        const EXAMS = {
            "2026-05-26": { name: "–¶–≠: –ü—Ä–µ–¥–º–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä (2-–π —ç–∫–∑–∞–º–µ–Ω)", type: "exam" },
            "2026-05-29": { name: "–¶–≠: –†—É—Å—Å–∫–∏–π –∏–ª–∏ –ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ (1-–π —ç–∫–∑–∞–º–µ–Ω)", type: "exam" },
            "2026-06-20": { name: "–¶–≠: –†–µ–∑–µ—Ä–≤–Ω—ã–π –¥–µ–Ω—å (–ü—Ä–µ–¥–º–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä)", type: "exam" },
            "2026-06-22": { name: "–¶–≠: –†–µ–∑–µ—Ä–≤–Ω—ã–π –¥–µ–Ω—å (–Ø–∑—ã–∫–∏)", type: "exam" },
            "2026-08-17": { name: "–¶–≠: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –¥–µ–Ω—å", type: "exam" },
            "2026-08-19": { name: "–¶–≠: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –¥–µ–Ω—å", type: "exam" },
        };
        
        // –ù–ò–ö–û (–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è) - Mock Dates
        const NIKO_TESTING = {
            "2025-10-20": { name: "–ù–ò–ö–û: –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ (6 –∫–ª–∞—Å—Å)", type: "niko-testing" },
            "2026-04-15": { name: "–ù–ò–ö–û: –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ (8 –∫–ª–∞—Å—Å)", type: "niko-testing" },
        };

        // –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏, –ø–µ—Ä–µ–Ω–æ—Å—ã –∏ —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
        const EVENTS_BASE = {
            // –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ
            "2025-09-17": { name: "–î–µ–Ω—å –Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –µ–¥–∏–Ω—Å—Ç–≤–∞", type: "official-holiday" },
            "2025-11-07": { name: "–î–µ–Ω—å –û–∫—Ç—è–±—Ä—å—Å–∫–æ–π —Ä–µ–≤–æ–ª—é—Ü–∏–∏", type: "official-holiday" }, 
            "2026-02-23": { name: "–î–µ–Ω—å –∑–∞—â–∏—Ç–Ω–∏–∫–æ–≤ –û—Ç–µ—á–µ—Å—Ç–≤–∞", type: "official-holiday" },
            "2026-03-08": { name: "–î–µ–Ω—å –∂–µ–Ω—â–∏–Ω", type: "official-holiday" },
            "2026-05-01": { name: "–ü—Ä–∞–∑–¥–Ω–∏–∫ —Ç—Ä—É–¥–∞", type: "official-holiday" },
            "2026-05-09": { name: "–î–µ–Ω—å –ü–æ–±–µ–¥—ã", type: "official-holiday" },
            "2026-07-03": { name: "–î–µ–Ω—å –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –†–ë", type: "official-holiday" },
            
            // –ö–æ–Ω–∫—É—Ä—Å—ã
            ...generateDateRange('2025-10-01', '2025-10-18', '–®–∫–æ–ª—å–Ω—ã–π —ç—Ç–∞–ø –æ–ª–∏–º–ø–∏–∞–¥ (1-–π —ç—Ç–∞–ø)', 'competition'),
            "2025-11-14": { name: "–†–∞–π–æ–Ω–Ω—ã–π —ç—Ç–∞–ø –æ–ª–∏–º–ø–∏–∞–¥ (–ù–∞—á–∞–ª–æ)", type: "competition" },
            "2025-11-22": { name: "–ù–ü–ö (–ù–∞—É—á–Ω–æ-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è), 1-–π —ç—Ç–∞–ø (–°—É–±–±–æ—Ç–∞)", type: "competition" },
            "2026-01-12": { name: "–û–±–ª–∞—Å—Ç–Ω–æ–π —ç—Ç–∞–ø –æ–ª–∏–º–ø–∏–∞–¥ (–ù–∞—á–∞–ª–æ)", type: "competition" },
            "2026-03-23": { name: "–ó–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø –æ–ª–∏–º–ø–∏–∞–¥ (–ù–∞—á–∞–ª–æ)", type: "competition" },
            
            // –ü–µ—Ä–µ–Ω–æ—Å—ã
            "2025-12-20": { name: "–†–∞–±–æ—á–∞—è —Å—É–±–±–æ—Ç–∞ (–∑–∞ 26.12)", type: "transfer-workday" },
            "2025-12-26": { name: "–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–π –í—ã—Ö–æ–¥–Ω–æ–π (–∑–∞ 20.12)", type: "transfer-day-off" }, 
            "2026-01-02": { name: "–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–π –í—ã—Ö–æ–¥–Ω–æ–π (–æ—Ç—Ä–∞–±–æ—Ç–∫–∞ 10.01)", type: "transfer-day-off" }, 
            "2026-01-10": { name: "–†–∞–±–æ—á–∞—è —Å—É–±–±–æ—Ç–∞ (–æ—Ç—Ä–∞–±–æ—Ç–∫–∞ 02.01)", type: "transfer-workday" }, 
            "2026-04-20": { name: "–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–π –í—ã—Ö–æ–¥–Ω–æ–π (–∑–∞ 25.04)", type: "transfer-day-off" },
            "2026-04-25": { name: "–†–∞–±–æ—á–∞—è —Å—É–±–±–æ—Ç–∞ (–∑–∞ 20.04)", type: "transfer-workday" },
            
            // –†–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏
            "2025-10-05": { name: "–î–µ–Ω—å –£—á–∏—Ç–µ–ª—è (–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)", type: "official-holiday" }, 
            "2025-12-25": { name: "–ö–∞—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ –†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ (C)", type: "official-holiday" }, 
            "2026-01-01": { name: "–¢–æ—Ä–∂–µ—Å—Ç–≤–æ –ü—Ä–µ—Å–≤—è—Ç–æ–π –ë–æ–≥–æ—Ä–æ–¥–∏—Ü—ã (C)", type: "official-holiday" }, 
            "2026-01-06": { name: "–ö–∞—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ –ë–æ–≥–æ—è–≤–ª–µ–Ω–∏–µ (–¢—Ä–∏ –ö–æ—Ä–æ–ª—è) (C)", type: "catholic-holiday" },
            "2026-01-07": { name: "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ –†–æ–∂–¥–µ—Å—Ç–≤–æ –•—Ä–∏—Å—Ç–æ–≤–æ (–ü)", type: "official-holiday" }, 
            "2026-01-19": { name: "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ –ö—Ä–µ—â–µ–Ω–∏–µ –ì–æ—Å–ø–æ–¥–Ω–µ (–ü)", type: "orthodox-holiday" },
            "2026-03-29": { name: "–ö–∞—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ –í–µ—Ä–±–Ω–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ (C)", type: "catholic-holiday" },
            "2026-04-05": { name: "–ö–∞—Ç–æ–ª–∏—á–µ—Å–∫–∞—è –ü–∞—Å—Ö–∞ (C)", type: "catholic-holiday" },
            "2026-04-12": { name: "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ –í–µ—Ä–±–Ω–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ (–ü)", type: "orthodox-holiday" },
            "2026-04-19": { name: "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–∞—è –ü–∞—Å—Ö–∞ (–ü)", type: "orthodox-holiday" },
            "2026-04-21": { name: "–†–∞–¥—É–Ω–∏—Ü–∞ (–ü)", type: "official-holiday" }, 
            "2026-05-28": { name: "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ –í–æ–∑–Ω–µ—Å–µ–Ω–∏–µ –ì–æ—Å–ø–æ–¥–Ω–µ (–ü)", type: "orthodox-holiday" },
            "2026-06-04": { name: "–ö–∞—Ç–æ–ª–∏—á–µ—Å–∫–æ–µ –í–æ–∑–Ω–µ—Å–µ–Ω–∏–µ (C)", type: "catholic-holiday" },
            "2026-06-07": { name: "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–∞—è –¢—Ä–æ–∏—Ü–∞ / –ü—è—Ç–∏–¥–µ—Å—è—Ç–Ω–∏—Ü–∞ (–ü)", type: "orthodox-holiday" },
            "2026-06-14": { name: "–ö–∞—Ç–æ–ª–∏—á–µ—Å–∫–∞—è –¢—Ä–æ–∏—Ü–∞ (C)", type: "catholic-holiday" },
            "2026-08-19": { name: "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ –ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ì–æ—Å–ø–æ–¥–Ω–µ (–ü)", type: "orthodox-holiday" },
            "2026-08-28": { name: "–ü—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–µ –£—Å–ø–µ–Ω–∏–µ –ü—Ä–µ—Å–≤—è—Ç–æ–π –ë–æ–≥–æ—Ä–æ–¥–∏—Ü—ã (–ü)", type: "orthodox-holiday" },
        };
        
        // –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
        const EVENTS = { ...SCHOOL_HOLIDAYS, ...EXAMS, ...NIKO_TESTING, ...EVENTS_BASE };

        const MONTH_NAMES = ["–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å", "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"];
        const WEEK_DAYS = ["–ü–Ω", "–í—Ç", "–°—Ä", "–ß—Ç", "–ü—Ç", "–°–±", "–í—Å"];

        // –ù–∞—á–∞–ª—å–Ω–∞—è –∏ –∫–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ —É—á–µ–±–Ω–æ–≥–æ –≥–æ–¥–∞
        const START_DATE = new Date(2025, 8, 1); 
        const END_DATE = new Date(2026, 7, 31);   

        // --- –§–£–ù–ö–¶–ò–ò –ì–ï–ù–ï–†–ê–¶–ò–ò –ö–û–ù–¢–ï–ù–¢–ê –ü–û–ü–û–í–ï–†–ê ---

        function getIconByEventType(type) {
            switch (type) {
                case 'official-holiday': return 'üî¥';
                case 'catholic-holiday': return 'üïäÔ∏è';
                case 'orthodox-holiday': return '‚ú®';
                case 'exam': return 'üìö';
                case 'niko-testing': return 'üß†'; 
                case 'competition': return 'üèÜ';
                case 'transfer-day-off': return '‚û°Ô∏èüõå';
                case 'transfer-workday': return '‚û°Ô∏èüìÖ';
                case 'school-holiday': return '‚≠ê';
                case 'weekend': return 'üõå';
                default: return '‚Ä¢';
            }
        }

        function getEventsForDay(dateKey) {
            const events = [];
            
            // –ö–∞–Ω–∏–∫—É–ª—ã
            if (SCHOOL_HOLIDAYS[dateKey]) {
                events.push(SCHOOL_HOLIDAYS[dateKey]);
            }
            // –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–≤–∫–ª—é—á–∞—è –ù–ò–ö–û –∏ –¶–≠)
            if (EVENTS_BASE[dateKey]) {
                events.push(EVENTS_BASE[dateKey]);
            }
            if (EXAMS[dateKey]) {
                events.push(EXAMS[dateKey]);
            }
             if (NIKO_TESTING[dateKey]) {
                events.push(NIKO_TESTING[dateKey]);
            }

            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã—Ö–æ–¥–Ω–æ–π, –µ—Å–ª–∏ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö —Å–æ–±—ã—Ç–∏–π
            const date = new Date(dateKey + 'T00:00:00');
            const dayOfWeek = date.getDay();
            const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
            if (isWeekend && events.length === 0) {
                 events.push({ name: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã—Ö–æ–¥–Ω–æ–π (–°–±/–í—Å)", type: "weekend" });
            }

            // –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
            const uniqueEvents = {};
            events.forEach(event => uniqueEvents[event.name] = event);
            return Object.values(uniqueEvents);
        }

        function generatePopoverContent(dateKey) {
            const date = new Date(dateKey + 'T00:00:00'); 
            const dateStr = date.toLocaleDateString('ru-RU', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            const events = getEventsForDay(dateKey);

            let content = `<div class="font-bold text-sm mb-1">${dateStr}</div><hr class="mb-2 border-gray-600"/>`;

            if (events.length === 0) {
                content += '<p class="text-xs italic text-gray-400">–ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.</p>';
            } else {
                content += events.map(event => {
                    return `
                        <div class="flex items-start mb-1">
                            <span class="mr-2 text-sm flex-shrink-0">${getIconByEventType(event.type)}</span>
                            <p class="text-xs leading-tight">${event.name}</p>
                        </div>
                    `;
                }).join('');
            }
            return content;
        }

        // --- –§–£–ù–ö–¶–ò–ò –†–ï–ù–î–ï–†–ò–ù–ì–ê –ö–ê–õ–ï–ù–î–ê–†–Ø ---
        
        function generateMonthBlock(date) {
            const year = date.getFullYear();
            const month = date.getMonth(); 
            
            const firstDayOfMonth = new Date(year, month, 1);
            // –ü–æ–ª—É—á–∞–µ–º –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (1=–ü–Ω, 7=–í—Å)
            const firstWeekday = (firstDayOfMonth.getDay() === 0) ? 7 : firstDayOfMonth.getDay(); 
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            let calendarHtml = `
                <h2 class="text-lg font-bold text-center py-3 bg-indigo-600 text-white rounded-t-xl">${MONTH_NAMES[month]} ${year}</h2>
                <div class="calendar-grid bg-gray-200">
                    ${WEEK_DAYS.map(day => `<div class="text-center py-2 text-sm font-semibold text-gray-700">${day}</div>`).join('')}
                </div>
                <div class="calendar-grid bg-gray-100">
            `;
            
            let monthEventsList = [];
            let cellIndex = 0; // –û–±—â–∏–π –∏–Ω–¥–µ–∫—Å —è—á–µ–π–∫–∏ (–≤–∫–ª—é—á–∞—è –ø—É—Å—Ç—ã–µ)

            // 1. –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –¥–ª—è —Å–¥–≤–∏–≥–∞
            for (let i = 0; i < firstWeekday - 1; i++) {
                calendarHtml += `<div class="day-cell other-month"></div>`;
                cellIndex++;
            }

            // 2. –î–Ω–∏ –º–µ—Å—è—Ü–∞
            for (let day = 1; day <= daysInMonth; day++) {
                const dayString = String(day).padStart(2, '0');
                const monthString = String(month + 1).padStart(2, '0');
                const dateKey = `${year}-${monthString}-${dayString}`;
                
                const currentDate = new Date(year, month, day);
                const dayOfWeek = currentDate.getDay(); 
                
                const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
                const isSchoolHolidayMarker = !!SCHOOL_HOLIDAYS[dateKey]; 
                
                // –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–∞
                const eventData = EVENTS_BASE[dateKey] || EXAMS[dateKey] || NIKO_TESTING[dateKey];
                
                let classes = 'current-month text-gray-800'; 
                let label = '';
                
                // --- –®–ê–ì 1: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–∞ –∫–∞–Ω–∏–∫—É–ª ---
                if (isSchoolHolidayMarker) { 
                    classes = 'school-holiday';
                    label = '–ö–∞–Ω *';
                    monthEventsList.push({ date: dateKey, name: SCHOOL_HOLIDAYS[dateKey].name, type: 'school-holiday' });
                } else {
                     classes = 'bg-white hover:bg-gray-50';
                }

                // --- –®–ê–ì 2: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ ---

                if (eventData) {
                    let newClasses = eventData.type;
                    
                    if (isSchoolHolidayMarker) {
                         newClasses += ' holiday-overlay';
                    }
                    classes = newClasses;
                    
                    monthEventsList = monthEventsList.filter(e => e.date !== dateKey || e.type !== 'school-holiday');
                    monthEventsList.push({ date: dateKey, name: eventData.name, type: eventData.type });

                    // –°–æ–∫—Ä–∞—â–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
                    if (eventData.type === 'competition') {
                        label = (eventData.name.includes("–û–ª–∏–º–ø") || eventData.name.includes("–ù–ü–ö")) ? "–û–ª–∏–º–ø" : "–ö–æ–Ω–∫—É—Ä—Å";
                    } else if (eventData.type.includes('transfer')) {
                        label = eventData.type === 'transfer-day-off' ? '–í—ã—Ö' : '–†–∞–± –°–±'; 
                    } else if (eventData.type === 'exam') {
                        label = '–¶–≠'; 
                    } else if (eventData.type === 'niko-testing') {
                        label = '–ù–ò–ö–û'; 
                    } else if (eventData.type === 'official-holiday') { 
                         label = eventData.name.split(' ')[0]; 
                    } else if (eventData.type.includes('holiday')) {
                         label = eventData.name.split(' ')[0]; 
                    }

                    if (isSchoolHolidayMarker && !label.includes('*')) {
                        label += ' *';
                    }

                } 
                else if (isWeekend) {
                    let newClasses = 'weekend'; 
                    
                    if (isSchoolHolidayMarker) {
                        newClasses += ' holiday-overlay';
                    }
                    classes = newClasses;
                    
                    if (isSchoolHolidayMarker) {
                         label = label || '–ö–∞–Ω *';
                    }
                }
                
                // --- 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å ---
                if (dateKey === TODAY_DATE_KEY) {
                    classes += ' today';
                    label = label || '–°–ï–ì–û–î–ù–Ø';
                }

                // --- 4. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ø–æ–≤–µ—Ä–∞ ---
                // –ï—Å–ª–∏ —è—á–µ–π–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–µ—Ä–≤–æ–π –≤–∏–∑—É–∞–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ (–∏–Ω–¥–µ–∫—Å 0-6), —Ä–∞–∑–º–µ—â–∞–µ–º –ø–æ–ø–æ–≤–µ—Ä —Å–Ω–∏–∑—É.
                const popoverPositionClass = (cellIndex < 7) ? 'popover-below' : '';

                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø–æ–ø–æ–≤–µ—Ä–∞
                const popoverContent = generatePopoverContent(dateKey);

                calendarHtml += `
                    <div class="day-cell ${classes} ${popoverPositionClass} relative group">
                        <span class="day-number">${day}</span>
                        ${label ? `<span class="text-[0.6rem] leading-none opacity-80 mt-1">${label}</span>` : ''}
                        
                        <!-- –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ –æ–∫–Ω–æ (Popover) -->
                        <div class="popover-box absolute left-1/2 bg-gray-800 text-white p-3 rounded-lg shadow-xl z-50">
                            ${popoverContent}
                        </div>
                    </div>
                `;
                cellIndex++;
            }

            // 3. –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –≤ –∫–æ–Ω—Ü–µ
            const totalCells = cellIndex;
            const remainingCells = (42 - totalCells) % 7; 

            for (let i = 0; i < remainingCells; i++) {
                calendarHtml += `<div class="day-cell other-month"></div>`;
            }

            calendarHtml += `</div>`; // –ó–∞–∫—Ä—ã–≤–∞–µ–º calendar-grid

            // 4. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π (Summary List HTML)
            let summaryHtml = '';
            if (monthEventsList.length > 0) {
                const uniqueEvents = [];
                const addedEvents = new Set();
                
                // –§–∏–ª—å—Ç—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
                monthEventsList.forEach(event => {
                    const key = event.date + event.name; 
                    if (!addedEvents.has(key)) {
                        uniqueEvents.push(event);
                        addedEvents.add(key);
                    }
                });

                uniqueEvents.sort((a, b) => new Date(a.date + 'T00:00:00') - new Date(b.date + 'T00:00:00'));
                
                const consolidatedEvents = [];
                if (uniqueEvents.length > 0) {
                    let currentGroup = { ...uniqueEvents[0], endDate: uniqueEvents[0].date };
                    let groupEnd = new Date(currentGroup.date + 'T00:00:00');
                    
                    for (let i = 1; i < uniqueEvents.length; i++) {
                        const nextItem = uniqueEvents[i];
                        const nextDate = new Date(nextItem.date + 'T00:00:00');
                        
                        if (currentGroup.name === nextItem.name && 
                            currentGroup.type === nextItem.type &&
                            (nextDate.getTime() - groupEnd.getTime()) === (1000 * 60 * 60 * 24) 
                        ) {
                            groupEnd = nextDate; 
                        } else {
                            currentGroup.endDate = groupEnd.toLocaleDateString('en-CA');
                            consolidatedEvents.push(currentGroup);
                            
                            currentGroup = { ...nextItem, endDate: nextItem.date };
                            groupEnd = new Date(currentGroup.date + 'T00:00:00');
                        }
                    }
                    currentGroup.endDate = groupEnd.toLocaleDateString('en-CA');
                    consolidatedEvents.push(currentGroup);
                }

                const listItems = consolidatedEvents.map(item => {
                    const startDate = new Date(item.date + 'T00:00:00');
                    const endDate = new Date(item.endDate + 'T00:00:00');
                    
                    let dateFormatted;
                    if (item.date === item.endDate) {
                        dateFormatted = startDate.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' });
                    } else {
                        const startDay = startDate.toLocaleDateString('ru-RU', { day: 'numeric' });
                        const endFormatted = endDate.toLocaleDateString('ru-RU', { day: 'numeric', month: 'short' });
                        dateFormatted = `${startDay} - ${endFormatted}`;
                    }
                    
                    const icon = getIconByEventType(item.type);
                    let colorClass = 'text-gray-700';
                    
                    if (item.type.includes('official-holiday')) colorClass = 'text-red-700 font-bold';
                    if (item.type.includes('catholic-holiday')) colorClass = 'text-pink-700 font-semibold';
                    if (item.type.includes('orthodox-holiday')) colorClass = 'text-amber-600 font-semibold';
                    if (item.type.includes('exam')) colorClass = 'text-teal-600 font-semibold';
                    if (item.type.includes('niko-testing')) colorClass = 'text-purple-700 font-bold';
                    if (item.type.includes('competition')) colorClass = 'text-yellow-700';
                    if (item.type.includes('transfer')) colorClass = 'text-blue-600 font-bold';
                    if (item.type.includes('school-holiday')) colorClass = 'text-purple-600';
                    
                    return `
                        <li class="flex items-start mb-1 leading-tight">
                            <span class="mr-2 flex-shrink-0 text-sm">${icon}</span>
                            <span class="text-xs ${colorClass}">
                                <span class="font-bold">${dateFormatted}:</span> ${item.name}
                            </span>
                        </li>
                    `;
                }).join('');

                summaryHtml = `
                    <div class="p-4 bg-gray-50 border-t border-gray-200 rounded-b-xl">
                        <h3 class="font-bold text-sm text-gray-800 mb-2">–°–æ–±—ã—Ç–∏—è –º–µ—Å—è—Ü–∞:</h3>
                        <ul class="list-none p-0 m-0 space-y-1">
                            ${listItems}
                        </ul>
                    </div>
                `;
            }


            return `
                <div class="bg-white rounded-xl shadow-lg">
                    ${calendarHtml}
                    ${summaryHtml}
                </div>
            `;
        }

        /**
         * –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.
         */
        function renderCalendar() {
            const container = document.getElementById('calendarContainer');
            let current = new Date(START_DATE.getTime()); 
            let html = '';

            for (let i = 0; i < 12; i++) {
                if (current.getFullYear() > 2026 || (current.getFullYear() === 2026 && current.getMonth() > 7)) {
                    break;
                }
                
                html += generateMonthBlock(current);
                current.setMonth(current.getMonth() + 1);
            }

            container.innerHTML = html;
        }

        // –ó–∞–ø—É—Å–∫ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            renderCalendar(); 
        };
    </script>
</body>
</html>

